apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: listener-egress
  namespace: prod-exchange
  labels:
    app.kubernetes.io/managed-by: argocd
spec:
  podSelector:
    matchLabels: { app: listener }
  policyTypes: ["Egress"]
  egress:
  - to:
    - ipBlock: { cidr: 10.50.10.100/32 }  # BTC RPC
    ports: [{ port: 8332, protocol: TCP }]
  - to:
    - ipBlock: { cidr: 10.50.10.101/32 }  # ETH RPC
    ports: [{ port: 8545, protocol: TCP }]
  - to:
    - ipBlock: { cidr: 10.100.30.0/24 }   # MSK brokers 예시
    ports: [{ port: 9092, protocol: TCP }]
